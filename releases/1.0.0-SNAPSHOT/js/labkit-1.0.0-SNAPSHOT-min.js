/*!
  ~ labKit-1.0.0-SNAPSHOT.js
  ~ Copyright (c) 2014 George Norman.
  ~ Licensed under the Apache License, Version 2.0 (the License);
  ~     http://www.apache.org/licenses/LICENSE-2.0
*/
var tzLogHelperModule=(function(){var a=false;return{enableLogging:function(){a=true},disableLogging:function(){a=false},debug:function(b){if(a){console.log(new Date().toJSON()+" DEBUG: "+b)}},warning:function(b){if(a){console.log(new Date().toJSON()+" WARN: "+b)}},error:function(c){if(a){var b=new Error();console.log(new Date().toJSON()+" ERROR: "+c+" - "+b.stack)}}}}());var tzDomHelperModule=(function(a){return{getInnerHtml:function(d){var c="";var e=document.getElementById(d);if(e){c=e.innerHTML;c=c.trim()}return c},getInnerHtmlWithDefault:function(d){var c=this.getInnerHtml(d);return this.isEmpty(c)?'<span style="color:red;">No element found for ID: '+d:c},getInnerHtmlAsArray:function(d){var c=this.getInnerHtml(d).split("\n");return c},getFirstElementByTagName:function(e){var c=null;var d=document.getElementsByTagName(e);if(d===null||d.length===0){a.warning("getFirstElementByTagName didn't find an element named: "+e)}else{c=d[0]}return c},getStyleValueById:function(e,d){var c;var f=document.getElementById(e);if(f==null){c="getStyleValueById didn't find element with ID: "+e}else{c=this.getStyleValue(f,d)}return c},getStyleValue:function(e,d){var c;if(e==null){c=""}else{c=window.getComputedStyle(e).getPropertyValue(d)}return c},insertElement:function(d,c){b("<"+d+">"+c+"</"+d+">")},insertElementWithTagAttributes:function(e,c,d){c=(c.length>0)?" "+c:c;b("<"+e+c+">"+d+"</"+e+">")},createElement:function(i,d,f){var c=document.createElement(d);if(this.isNotEmpty(f)){var e=JSON.parse(f);for(var h in e){if(h.indexOf("style.")==0){var g=h.split(".")[1];c.style[g]=e[h]}else{c[h]=e[h]}}}if(i!=null){i.appendChild(c)}return c},createElementWithAdjacentHtml:function(f,e,d,g){var c=this.createElement(f,e,d);c.insertAdjacentHTML("afterbegin",g);return c},removeAllChildNodes:function(c){while(c.hasChildNodes()){c.removeChild(c.lastChild)}},xmlEscape:function(d){var c=d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return c},splitWithTrim:function(d){var c=this.isEmpty(d)?d:d.split(/[\s,]+/);return c},quoteList:function(e){var c="";if(e!=null){var f="";for(var d=0;d<e.length;d++){c+=f+'"'+e[d].trim()+'"';f=","}}return c},coalesce:function(e,d){var c=this.isEmpty(e)?d:e;a.debug(e);return c},isEmpty:function(d){var c=(d===undefined||d===null||d===""||(d.hasOwnProperty("length")&&d.length==0));return c},isNotEmpty:function(c){return !this.isEmpty(c)},show:function(c){var d=document.getElementById(c);d.style.display="block"},hide:function(c){var d=document.getElementById(c);d.style.display="none"}};function b(c){document.writeln(c)}}(tzLogHelperModule));var tzCodeHighlighterModule=(function(){return{highlight:function(b,c){var a=b;a=a.replace(/(["'])(.*?)\1/gm,"[[quoted-string]]$1$2$1[[/quoted-string]]");a=a.replace(/(\/\/.*$)/gm,"[[comment]]$1[[/comment]]");a=a.replace(/(\/\*[\s\S]+?\*\/)/gm,"[[comment]]$1[[/comment]]");a=a.replace(/(<!--[\s\S]*?-->)/gm,"[[comment]]$1[[/comment]]");a=a.replace(/(&lt;!--[\s\S]*?--&gt;)/gm,"[[comment]]$1[[/comment]]");if(c==="*ml"){a=a.replace(/(&lt;[-\w]+|&lt;\w+|&lt;\/[-\w]+&gt;)/gm,"[[tag-name]]$1[[/tag-name]]");a=a.replace(/([-\w]+=)/gm,"[[attribute-name]]$1[[/attribute-name]]");a=a.replace(/\[\[tag-name\]\]/gm,"<span class='tz-highlight-tag-name'>").replace(/\[\[\/tag-name\]\]/gm,"</span>");a=a.replace(/\[\[attribute-name\]\]/gm,"<span class='tz-highlight-attribute-name'>").replace(/\[\[\/attribute-name\]\]/gm,"</span>")}else{if(c==="css"){a=a.replace(/(.*\{|\})/gm,"[[css-selector]]$1[[/css-selector]]");a=a.replace(/(.*:)/gm,"[[css-property]]$1[[/css-property]]");a=a.replace(/\[\[css-selector\]\]/gm,"<span class='tz-highlight-css-selector'>").replace(/\[\[\/css-selector\]\]/gm,"</span>");a=a.replace(/\[\[css-property\]\]/gm,"<span class='tz-highlight-css-property'>").replace(/\[\[\/css-property\]\]/gm,"</span>")}}a=a.replace(/\[\[quoted-string\]\]/gm,"<span class='tz-highlight-comment'>").replace(/\[\[\/quoted-string\]\]/gm,"</span>");a=a.replace(/\[\[comment\]\]/gm,"<span class='tz-highlight-comment'>").replace(/\[\[\/comment\]\]/gm,"</span>");return a}}}());var tzCustomTagHelperModule=(function(tzDomHelper){var templateVariableExpression=new RegExp("{{(.*?)}}","g");return{getTemplateId:function(tagModule){return tagModule.getTagName()+"-tag-template"},renderAll:function(tagModule){var tagNodeList=document.getElementsByTagName(tagModule.getTagName());for(var i=0;i<tagNodeList.length;i++){var tagNode=tagNodeList[i];tagModule.renderTag(tagNode)}},renderFirst:function(tagModule){var tagNode=tzDomHelper.getFirstElementByTagName(tagModule.getTagName());if(tagNode!=null){tagModule.renderTag(tagNode)}},renderTagById:function(tagModule,tagId){var tagNode=tzDomHelper.getElementById(tagId);if(tagNode!=null){tagModule.renderTag(tagNode)}},renderTagFromTemplate:function(containerNode,template,context){var evaluatedTemplate=template.replace(templateVariableExpression,function($0,$1){var result=eval($1);return result});containerNode.insertAdjacentHTML("afterbegin",evaluatedTemplate)},getTemplate:function(templateId){var result=tzDomHelper.getInnerHtml(templateId);if(tzDomHelper.isEmpty(result)){result='<span style="color:red;">Template was not found: '+templateId+"</span>"}return result},getFirstMatchedGroup:function(tagNode,innerTagExpression){var result=null;if(tagNode.innerHTML.match(innerTagExpression)){result=tagNode.innerHTML.match(innerTagExpression)[0].replace(innerTagExpression,"$1")}return result}}}(tzDomHelperModule));var lkBulletPointTag=(function(c,a){var b=['<div class="group" {{context.styleAttribute}}>','  <div><i class="{{context.iconClass}}"></i></div>','  <div style="margin-left:{{context.leftColumnWidth}};">{{context.rawRightColumnHtml}}</div>',"</div>"].join("\n");return{getTagName:function(){return"lk-bullet-point"},renderAll:function(){a.renderAll(this)},renderTagById:function(d){a.renderTagById(this,d)},renderTag:function(f){var e=f.getAttribute("style");var d={iconClass:f.getAttribute("iconClass"),styleAttribute:c.isEmpty(e)?"":"style='"+e+"'",leftColumnWidth:c.coalesce(f.getAttribute("leftColumnWidth"),"24px"),rawRightColumnHtml:f.innerHTML};c.removeAllChildNodes(f);this.render(f,d)},render:function(d,e){a.renderTagFromTemplate(d,b,e)}}}(tzDomHelperModule,tzCustomTagHelperModule));var lkBackToTag=(function(b,a){var c=null;return{getTagName:function(){return"lk-back-to"},renderAll:function(){a.renderAll(this)},renderTagById:function(d){a.renderTagById(this,d)},renderTag:function(d){var f=d.getAttribute("links");var e={links:b.isEmpty(f)?null:JSON.parse(f)};this.render(d,e)},render:function(d,f){if(b.isEmpty(f.links)){if(this.globalLinks==null){b.createElementWithAdjacentHtml(d,"p",'{"style.color":"red"}',"Global Links was not set for lkBackToTag.")}else{for(var e in this.globalLinks){b.createElementWithAdjacentHtml(d,"a",'{"href":"'+this.globalLinks[e]+'", "style.margin-right":"12px"}',e)}}}else{b.createElementWithAdjacentHtml(d,"style",null,f.links)}},setGlobalLinks:function(d){this.globalLinks=d}}}(tzDomHelperModule,tzCustomTagHelperModule));var lkTableOfContentsTag=(function(c,b){return{getTagName:function(){return"lk-table-of-contents"},renderAll:function(){b.renderFirst(this)},renderTagById:function(e){b.renderTagById(this,e)},renderTag:function(e){var f={cssClassName:e.getAttribute("class"),level1ItemsTagName:e.getAttribute("level1ItemsTagName"),level2ItemsTagName:e.getAttribute("level2ItemsTagName"),title:e.getAttribute("title")};this.render(e,f)},render:function(k,e){var f=document.getElementsByTagName(e.level1ItemsTagName);var o=null;if(c.isNotEmpty(e.level2ItemsTagName)){o=document.getElementsByTagName(e.level2ItemsTagName)}var h=c.createElement(null,"ul",'{"className":"'+c.coalesce(e.cssClassName,"toc")+'"}');for(var n=0;n<f.length;n++){var g=a(f[n]);var l=d(o,f[n].id+".");if(l.length>0){var p=document.createElement("ul");for(var m=0;m<l.length;m++){p.appendChild(a(l[m]))}g.appendChild(p)}h.appendChild(g)}e.title=c.coalesce(e.title,"Table of Contents");c.createElementWithAdjacentHtml(k,"h2",'{"id":"tableOfContents"}',"<b>"+e.title+"</b>");k.appendChild(h)}};function d(h,f){var e=[];if(h!=null){for(var g=0;g<h.length;g++){if(h[g].id.indexOf(f)==0){e.push(h[g])}}}return e}function a(g){var e=document.createElement("li");if(g.hasAttribute("lkBulletPointPass")){e.className+=" pass"}else{if(g.hasAttribute("lkBulletPointFail")){e.className+=" fail"}}var f=c.coalesce(g.innerHTML,g.id);e.insertAdjacentHTML("afterbegin",'<a href="#'+g.id+'">'+f+"</a>");return e}}(tzDomHelperModule,tzCustomTagHelperModule));var lkHtmlBlockTag=(function(b,a){var c=new RegExp("<comment>(.+?)</comment>","ig");return{getTagName:function(){return"lk-html-block"},renderAll:function(){a.renderAll(this)},renderTagById:function(d){a.renderTagById(this,d)},renderTag:function(f){var e=f.getAttribute("templateId");var g=f.getAttribute("heading");if(b.isEmpty(g)){g="Rendered Result"}var d={heading:g,resultComment:a.getFirstMatchedGroup(f,c),rawHtml:b.getInnerHtml(e)};b.removeAllChildNodes(f);this.render(f,d)},render:function(d,e){if(b.isNotEmpty(e.heading)){b.createElementWithAdjacentHtml(d,"h4",null,e.heading)}if(b.isNotEmpty(e.resultComment)){b.createElementWithAdjacentHtml(d,"p",'{"className":"lk-html-block-comment"}',e.resultComment)}var f=b.createElementWithAdjacentHtml(d,"div",'{"className":"lk-html-block"}',e.rawHtml);if(b.isNotEmpty(e.height)){f.style.height=e.height}}}}(tzDomHelperModule,tzCustomTagHelperModule));var lkCssBlockTag=(function(b,a){return{getTagName:function(){return"lk-css-block"},renderAll:function(){a.renderAll(this)},renderTagById:function(c){a.renderTagById(this,c)},renderTag:function(c){var d={rawCss:b.getInnerHtml(c.getAttribute("templateId"))};this.render(c,d)},render:function(c,d){if(b.isEmpty(d.rawCss)){b.createElementWithAdjacentHtml(c,"p",'{"style.color":"red"}',"Raw CSS is missing")}else{b.createElementWithAdjacentHtml(c,"style",null,d.rawCss)}}}}(tzDomHelperModule,tzCustomTagHelperModule));var lkCodeExampleTag=(function(c,a,b){var d=new RegExp("<comment>(.+?)</comment>","ig");return{getTagName:function(){return"lk-code-example"},renderAll:function(){a.renderAll(this)},renderTagById:function(e){a.renderTagById(this,e)},renderTag:function(g){var f=g.getAttribute("templateId");var e={heading:g.getAttribute("heading"),codeBlockComment:a.getFirstMatchedGroup(g,d),lang:g.getAttribute("lang"),width:g.getAttribute("width"),rawCode:c.getInnerHtml(f)};c.removeAllChildNodes(g);this.render(g,e)},render:function(e,j){if(c.isNotEmpty(j.heading)){c.createElementWithAdjacentHtml(e,"h4",null,j.heading)}if(c.isNotEmpty(j.codeBlockComment)){c.createElementWithAdjacentHtml(e,"p",'{"className":"lk-code-example-comment"}',j.codeBlockComment)}if(c.isEmpty(j.rawCode)){c.createElementWithAdjacentHtml(e,"p",'{"style.color":"red"}',"Raw Code is missing")}else{var l=c.createElement(null,"code",'{"className":"lk-code-example"}');var k=c.createElement(l,"ol");if(c.isNotEmpty(j.width)){k.style.width=j.width}var h=j.rawCode.split("\n");for(var g=0;g<h.length;g++){var f=c.xmlEscape(h[g]);c.createElementWithAdjacentHtml(k,"li",null," "+b.highlight(f,j.lang))}e.appendChild(l)}},refreshTagById:function(e){var f=document.getElementById(e);c.removeAllChildNodes(f);this.renderTag(f)}}}(tzDomHelperModule,tzCustomTagHelperModule,tzCodeHighlighterModule));var lkCssHtmlExampleTag=(function(c,b,f,h,g){var e=new RegExp("<cssComment>(.+?)</cssComment>","ig");var a=new RegExp("<htmlComment>(.+?)</htmlComment>","ig");var d=new RegExp("<resultComment>(.+?)</resultComment>","ig");return{getTagName:function(){return"lk-css-html-example"},renderAll:function(){b.renderAll(this)},renderTagById:function(i){b.renderTagById(this,i)},renderTag:function(m){var l;var i;if(c.isNotEmpty(m.getAttribute("templateId"))){l=m.getAttribute("templateId")+"Css";i=m.getAttribute("templateId")+"Html"}else{l=m.getAttribute("cssTemplateId");i=m.getAttribute("htmlTemplateId")}var n="";var o="";var j="";if(c.isNotEmpty(l)){o=b.getFirstMatchedGroup(m,e);j=c.getInnerHtml(l);if(c.isEmpty(j)){n="CSS Template was not found for given ID: "+l}}var k={cssComment:o,rawCss:j,htmlComment:b.getFirstMatchedGroup(m,a),rawHtml:c.getInnerHtml(i),resultComment:b.getFirstMatchedGroup(m,d),width:m.getAttribute("width"),height:m.getAttribute("height")};c.removeAllChildNodes(m);if(c.isNotEmpty(n)){c.createElementWithAdjacentHtml(m,"p",'{"style.color":"red"}',n)}this.render(m,k)},render:function(i,j){if(c.isNotEmpty(j.rawCss)){f.render(i,j);g.render(i,{heading:"CSS",codeBlockComment:j.cssComment,lang:"css",width:j.width,rawCode:j.rawCss})}g.render(i,{heading:"HTML",codeBlockComment:j.htmlComment,lang:"*ml",width:j.width,rawCode:j.rawHtml});h.render(i,{heading:"Rendered Result",resultComment:j.resultComment,height:j.height,rawHtml:j.rawHtml})}}}(tzDomHelperModule,tzCustomTagHelperModule,lkCssBlockTag,lkHtmlBlockTag,lkCodeExampleTag));var lkDisplayStylesTag=(function(h,b){var d=new RegExp("<comment>(.+?)</comment>","ig");var j=new RegExp("<legendImages>(.+?)</legendImages>","ig");var e=new RegExp("<elementIds>(.+?)</elementIds>","ig");var a=new RegExp("<styleNames>(.+?)</styleNames>","ig");var i={handleCompactListVariant:function(m,o,n){o.useCompactUnorderedList="true";if(h.isEmpty(o.title)){o.title="Rendered '"+n+"' styles:"}var l=m.innerHTML.replace(/\s+/g,"");o.unorderedListItems=c(l,n)},handleVerboseListVariant:function(l,m){if(h.isEmpty(m.title)){m.title="Rendered styles:"}m.useCompactUnorderedList="false";var n=l.innerHTML.trim();m.unorderedListItems=JSON.parse(n)},handleMatrixVariant:function(o,p){if(h.isEmpty(p.title)){p.title="Rendered styles:"}var m="";if(o.innerHTML.match(j)){m=o.innerHTML.match(j)[0].replace(j,"$1")}var s=o.innerHTML.match(e)[0].replace(e,"$1");var n=o.innerHTML.match(a)[0].replace(a,"$1");try{var q=f(h.splitWithTrim(s));var l={};l.legendImages=h.splitWithTrim(m);l.elements=q;l.styleNames=h.splitWithTrim(n);l.columnOptions="[id]";p.matrix=l}catch(r){console.log(r)}}};return{getTagName:function(){return"lk-display-styles"},renderAll:function(){b.renderAll(this)},renderTagById:function(l){b.renderTagById(this,l)},renderTag:function(l){var n={title:null,comment:null,width:null,useCompactUnorderedList:null,unorderedListItems:null,matrix:null};n.title=l.getAttribute("title");if(l.innerHTML.match(d)){n.comment=l.innerHTML.match(d)[0].replace(d,"$1")}n.width=l.getAttribute("width");var m=l.getAttribute("styleName");if(h.isNotEmpty(l.innerHTML)){if(h.isEmpty(m)){if(e.test(l.innerHTML)){i.handleMatrixVariant(l,n)}else{i.handleVerboseListVariant(l,n)}}else{i.handleCompactListVariant(l,n,m)}}h.removeAllChildNodes(l);this.render(l,n)},render:function(l,m){if(h.isNotEmpty(m.title)){h.createElementWithAdjacentHtml(l,"h4",null,m.title)}if(h.isNotEmpty(m.comment)){h.createElementWithAdjacentHtml(l,"p",'{"className":"lk-code-example-comment"}',m.comment)}if(h.isNotEmpty(m.matrix)){g(l,m)}else{if(h.isNotEmpty(m.unorderedListItems)){k(l,m)}else{h.createElementWithAdjacentHtml(l,"div",'{"style.color":"red"}',"ERROR: Table or Unordered list items were not specified or items not found.")}}}};function g(p,n){var t=n.matrix;var u,r,m,o;var l=h.createElement(null,"div",'{"className":"lk-display-styles-matrix"}');u=h.createElement(l,"table");if(h.isNotEmpty(n.width)){u.style.width=n.width}r=h.createElement(u,"tr");if(h.isNotEmpty(t.legendImages)){h.createElementWithAdjacentHtml(r,"th",null,"legend")}if(t.columnOptions.indexOf("[name]")>=0){h.createElementWithAdjacentHtml(r,"th",null,"name")}if(t.columnOptions.indexOf("[id]")>=0){h.createElementWithAdjacentHtml(r,"th",null,"id")}for(var s in t.styleNames){h.createElementWithAdjacentHtml(r,"th",null,t.styleNames[s])}for(var q in t.elements){r=h.createElement(u,"tr");if(h.isNotEmpty(t.legendImages)){o=h.createElement(r,"td",'{"className": "center"}');if(t.legendImages.length>q){h.createElement(o,"img",'{"src": "'+t.legendImages[q]+'"}')}else{h.createElementWithAdjacentHtml(o,"div",null,"???")}}if(t.columnOptions.indexOf("[name]")>=0){h.createElementWithAdjacentHtml(r,"td",null,t.elements[q].nodeName)}if(t.columnOptions.indexOf("[id]")>=0){h.createElementWithAdjacentHtml(r,"td",null,t.elements[q].id)}for(var s in t.styleNames){var v=h.getStyleValue(t.elements[q],t.styleNames[s]);h.createElementWithAdjacentHtml(r,"td",null,v)}}p.appendChild(l)}function k(l,p){var o=h.createElement(null,"ul");for(var m in p.unorderedListItems){var q;var n=p.unorderedListItems[m];if(p.useCompactUnorderedList=="true"){q="Element '"+m+"' is: "+h.getStyleValueById(m,n)}else{q="Element '"+m+"' has "+n+": "+h.getStyleValueById(m,n)}h.createElementWithAdjacentHtml(o,"li",null,q)}l.appendChild(o)}function c(m,o){var l={};var p=h.splitWithTrim(m);for(var n=0;n<p.length;n++){l[p[n]]=o}return l}function f(o){var l=new Array();for(var m in o){var n=document.getElementById(o[m]);if(n==null){throw"Element not found. The bad elementId is: "+o[m]}l.push(n)}return l}}(tzDomHelperModule,tzCustomTagHelperModule));var lkAncestorStylesTag=(function(b,a,e){var c=new RegExp("<comment>((.|\n)*)</comment>","ig");var d=new RegExp("<styleNames>(.+?)</styleNames>","ig");return{getTagName:function(){return"lk-ancestor-styles"},renderAll:function(){a.renderAll(this)},renderTagById:function(f){a.renderTagById(this,f)},renderTag:function(h){var n=h.getAttribute("title");var g=h.getAttribute("width");var l=h.getAttribute("startElementId");var k=a.getFirstMatchedGroup(h,c);var o=h.innerHTML.match(d)[0].replace(d,"$1");var i=new Array();var j=document.getElementById(l);while(j.parentNode!=null){i.push(j);j=j.parentNode}var m={elements:i,styleNames:b.splitWithTrim(o),columnOptions:"[id][name]"};var f={title:n,comment:k,width:g,useCompactUnorderedList:null,unorderedListItems:null,matrix:m};b.removeAllChildNodes(h);this.render(h,f)},render:function(f,g){e.render(f,g)}}}(tzDomHelperModule,tzCustomTagHelperModule,lkDisplayStylesTag));var baseKitModule=(function(a){return{handleOnLoad:function(){lkTableOfContentsTag.renderAll();lkCssBlockTag.renderAll();lkCodeExampleTag.renderAll();lkHtmlBlockTag.renderAll();lkCssHtmlExampleTag.renderAll();lkDisplayStylesTag.renderAll();lkAncestorStylesTag.renderAll();lkBulletPointTag.renderAll();lkBackToTag.renderAll()},handlePageLoadCompleted:function(b){var c=a.isEmpty(b)?a.getFirstElementByTagName("progress"):document.querySelector("."+b);if(c!=null){c.style.display="none";a.getFirstElementByTagName("main").style.display="block"}}}}(tzDomHelperModule));